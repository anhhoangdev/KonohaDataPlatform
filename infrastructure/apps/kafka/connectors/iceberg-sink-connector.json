{
  "name": "cdc-iceberg-sink",
  "config": {
    "connector.class": "org.apache.iceberg.connect.IcebergSinkConnector",
    "tasks.max": "1",
    "topics": "customers,orders,products",
    "key.converter": "io.confluent.connect.avro.AvroConverter",
    "value.converter": "io.confluent.connect.avro.AvroConverter",
    "key.converter.schema.registry.url": "http://schema-registry.kafka-platform.svc.cluster.local:8081",
    "value.converter.schema.registry.url": "http://schema-registry.kafka-platform.svc.cluster.local:8081",
    "key.converter.enhanced.avro.schema.support": "true",
    "value.converter.enhanced.avro.schema.support": "true",
    "iceberg.tables": "cdc_db.customers,cdc_db.orders,cdc_db.products",
    "iceberg.tables.auto-create-enabled": "true",
    "iceberg.tables.evolve-schema-enabled": "true",
    "iceberg.tables.route-field": "_topic",
    "iceberg.table.cdc_db.customers.route-regex": "customers",
    "iceberg.table.cdc_db.orders.route-regex": "orders", 
    "iceberg.table.cdc_db.products.route-regex": "products",
    "iceberg.catalog.type": "rest",
    "iceberg.catalog.uri": "http://iceberg-rest-catalog.kafka-platform.svc.cluster.local:8181",
    "iceberg.catalog.warehouse": "s3a://warehouse",
    "iceberg.catalog.io-impl": "org.apache.iceberg.aws.s3.S3FileIO",
    "iceberg.catalog.s3.endpoint": "http://minio.kyuubi.svc.cluster.local:9000",
    "iceberg.catalog.s3.access-key-id": "minioadmin",
    "iceberg.catalog.s3.secret-access-key": "minioadmin123",
    "iceberg.catalog.s3.path-style-access": "true",
    "transforms": "addTopic,debezium",
    "transforms.addTopic.type": "org.apache.kafka.connect.transforms.InsertField$Value",
    "transforms.addTopic.topic.field": "_topic",
    "transforms.debezium.type": "org.apache.iceberg.connect.transforms.DebeziumTransform",
    "transforms.debezium.cdc.target.pattern": "{db}.{table}"
  }
} 