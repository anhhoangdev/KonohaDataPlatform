# Auto-generated terraform.tfvars from config.env
# Do not edit this file directly - edit config.env instead

# Vault Configuration
vault_dev_mode   = true
vault_token      = "root"
vault_namespace  = "vault-system"

# Kubernetes Namespaces
kyuubi_namespace = "kyuubi"
kafka_platform_namespace = "kafka-platform"

# Vault Secrets Operator
enable_vault_secrets_operator = true

# Vault Secrets Configuration
create_vault_secrets = true
kyuubi_secrets = {
  # MinIO S3-compatible storage credentials
  minio = {
    path = "kyuubi/minio"
    data = {
      access_key = "minioadmin"
      secret_key = "minioadmin123"
      endpoint   = "http://minio:9000"
    }
  }

  # MariaDB credentials for Hive Metastore
  database = {
    path = "kyuubi/database"
    data = {
      host     = "mariadb"
      port     = "3306"
      database = "hive_metastore"
      username = "hive"
      password = "hivepassword"
      root_password = "rootpassword"
      # Add MariaDB-specific keys that match deployment expectations
      mariadb_host = "mariadb"
      mariadb_port = "3306"
      mariadb_database = "hive_metastore"
      mariadb_user = "hive"
      mariadb_password = "hivepassword"
      mariadb_root_password = "rootpassword"
    }
  }

  # üî• Spark configuration for Kyuubi engines
  spark = {
    path = "kyuubi/spark"
    data = {
      driver_memory    = "2g"
      executor_memory  = "2g"
      executor_cores   = "2"
      sql_warehouse_dir = "s3a://warehouse/"
      # Add missing keys that Kyuubi deployments expect
      spark_driver_memory = "2g"
      spark_executor_memory = "2g"
      spark_executor_cores = "2"
      spark_max_executors = "9"
      spark_sql_adaptive_enabled = "true"
      spark_sql_adaptive_coalescePartitions_enabled = "true"
    }
  }

  # üõ†Ô∏è Kyuubi server configuration
  kyuubi_server = {
    path = "kyuubi/server"
    data = {
      bind_host           = "0.0.0.0"
      bind_port           = "10009"
      frontend_bind_port  = "10099"
    }
  }

  # ‚òÅÔ∏è Airflow credentials (webserver/scheduler) and backend Postgres
  airflow = {
    path = "kyuubi/airflow"
    data = {
      postgres_db       = "airflow"
      postgres_user     = "airflow"
      postgres_password = "airflow123"
      postgres_host     = "airflow-postgresql"
      postgres_port     = "5432"
      sql_alchemy_conn  = "postgresql+psycopg2://airflow:airflow123@airflow-postgresql:5432/airflow"
      fernet_key        = "YlCImzjge_TeZc7jGvKjg8nqxCjFpZDOWl5bpFtXlDA="
    }
  }

  # üìà Grafana admin credentials
  grafana = {
    path = "kyuubi/grafana"
    data = {
      username = "admin"
      password = "admin123"
    }
  }
}

# FluxCD GitOps Configuration
enable_fluxcd = true
git_repository_url = "https://github.com/anhhoangdev/LocalDataPlatform"
git_branch = "main"
enable_image_automation = false

# Git Authentication (optional - for private repositories)
# git_auth_secret = "git-auth"
# git_username = "your-username"
# git_password = "ghp_your_github_token"

# Ingress Configuration
enable_ingress = true
enable_vault_ingress = true
enable_kyuubi_ingress = true
vault_ingress_host = "vault.local"
kyuubi_ingress_host = "kyuubi.local"

# TLS Configuration (optional)
enable_tls = false
enable_cert_manager = false
create_self_signed_issuer = true
# letsencrypt_email = "your-email@example.com"

# Monitoring
enable_monitoring = false
